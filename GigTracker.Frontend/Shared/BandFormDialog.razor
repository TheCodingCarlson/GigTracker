@using GigTracker.Frontend.Constants
@using GigTracker.Models

@if (_isLoading)
{
    <Loading />
}
else
{
    <MudDialog>
        <DialogContent>
            <MudForm @ref="_form" @bind-IsValid="@_isFormValid" @bind-Errors="@_formErrors">
                <MudTextField @bind-Value="_newBand.Name"
                              Label="Name"
                              Required />

                <MudSelect T="ICollection<BandMember>" @bind-Value="_newBand.Members" Label="Band" MultiSelection Required>
                    @foreach (var bandMember in _bandMembers)
                    {
                        <MudSelectItem T="BandMember" Value="bandMember">@($"{bandMember.FirstName} {bandMember.LastName}")</MudSelectItem>
                    }
                </MudSelect>

                <MudSelect T="ICollection<string>" @bind-Value="_newBand.Genres" Label="Genres" MultiSelection Required>
                    @foreach (var genre in GlobalConstants.MUSICAL_GENRES)
                    {
                        <MudSelectItem T="string" Value="genre">@genre</MudSelectItem>
                    }
                </MudSelect>
            </MudForm>
        </DialogContent>
        <DialogActions>
            <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="OnSubmit">Submit</MudButton>
            <MudButton Variant="Variant.Filled" Color="Color.Error" OnClick="OnClose">Close</MudButton>
        </DialogActions>
    </MudDialog>
}
